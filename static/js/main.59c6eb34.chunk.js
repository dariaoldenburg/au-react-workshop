(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(25)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(11),i=n.n(s),o=(n(18),n(19),n(2)),c=n(3),l=n(6),u=n(4),d=n(7),m=n(1),g=n(5),h=n.n(g);n(20);function f(e){return r.a.createElement("div",{className:h()("Cell",Object(m.a)({"Cell--header":e.header,"Cell--padded":e.padded,"Cell--scrollable":e.scrollable},"Cell--textAlign-".concat(e.textAlign),e.textAlign)),style:{width:"".concat(e.widthPercentage,"%"),height:e.height}},e.children)}f.defaultProps={header:!1,padded:!0,scrollable:!1,textAlign:"left"};var p=n(9),b=n(8),v=n(27),y=100,k=void 0,E=[],w=new v.a(1),C=[],S=new v.a(1);function O(e){E=e,w.next(e)}function j(e){C=e,S.next(e)}function x(e){var t=Object(b.a)(C),n=e.parentMessageId?t.find(function(t){return t.id===e.parentMessageId}):void 0;if(n){var a=t.indexOf(n);t[a]=Object(p.a)({},n,{submessages:[].concat(Object(b.a)(n.submessages||[]),[{id:++y,content:e.content,createdAt:(new Date).toString(),user:k}])})}else t.push({id:++y,content:e.content,createdAt:(new Date).toString(),user:k,submessages:[]});j(t)}function A(e){return new Promise(function(t,n){setTimeout(function(){(function(e){O([].concat(Object(b.a)(E),[e]))})(k=Object(p.a)({id:++y},e)),x({content:"** przychodzi ".concat(k.name,"...")}),t(k)},500)})}function P(){return k?new Promise(function(e,t){setTimeout(function(){var t;k&&(t=k,O(E.filter(function(e){return e.id!==t.id})),x({content:"** odchodzi ".concat(k.name,"...")})),e()},500)}):Promise.resolve()}setTimeout(function(){O([{id:++y,name:"geron"},{id:++y,name:"hit_fm",color:"pink",senior:!0},{id:++y,name:"kasienka2"},{id:++y,name:"Lady_Ann_"},{id:++y,name:"MalWINKaaa",color:"orange",senior:!0}]),j([{id:++y,createdAt:(new Date).toString(),content:"@here \u015blimak",user:E[1],submessages:[]},{id:++y,createdAt:(new Date).toString(),content:"mingwok kto\u015b?",user:E[4],submessages:[{id:++y,createdAt:(new Date).toString(),content:":+1:",user:E[2]},{id:++y,createdAt:(new Date).toString(),content:"1x makaron sma\u017cony z kurczakiem",user:E[3]},{id:++y,createdAt:(new Date).toString(),content:"@kasienka2 a jaki makaron?",user:E[4]}]}])},1e3);n(21);function M(e){return r.a.createElement("div",{className:"Row"},e.children)}n(22);function T(e){return r.a.createElement("div",{className:"UsersList"},e.users.map(function(e){return r.a.createElement("div",{key:e.id||e.name,className:"UsersList__item",style:{color:e.color||"black",fontWeight:e.senior?"bold":void 0}},e.name)}))}var U=function(e){var t=e.messages,n=e.extended,a=e.onClick;return r.a.createElement("div",{style:{marginLeft:20}},n&&t.map(function(e){return r.a.createElement(N,{key:e.id,message:e})}),r.a.createElement("div",null,r.a.createElement("button",{onClick:a},n?"[schowaj odpowiedzi]":"[poka\u017c odpowiedzi (".concat(t.length,")]"))))},N=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={extended:!1},n.handleShowMore=function(){n.setState(function(e){return{extended:!e.extended}})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.onReplyClick,a=e.showSubmessages,s=this.state.extended,i=new Date(t.createdAt);return r.a.createElement("div",{key:t.id||t.content},r.a.createElement("strong",{onClick:n,style:{cursor:"pointer"}},"[",i.toLocaleTimeString(),"]")," ",t.user&&r.a.createElement("span",{style:{color:t.user.color,fontWeight:t.user.senior?"bold":void 0}},t.user.name,":"," "),t.content,a&&t.submessages&&t.submessages.length>0&&r.a.createElement(U,{messages:t.submessages,extended:s,onClick:this.handleShowMore}))}}]),t}(r.a.PureComponent);function R(e){return r.a.createElement(r.a.Fragment,null,e.messages.map(function(t){return r.a.createElement(N,{key:t.id,message:t,onReplyClick:function(){return e.onReplyClick&&e.onReplyClick(t)}})}))}N.defaultProps={showSubmessages:!0};n(23);function _(e){var t,n=e.children,a=e.onClick,s=e.variant,i=e.disabled,o=e.type,c=e.fullWidth;return r.a.createElement("button",{className:h()("Button",(t={},Object(m.a)(t,"Button--variant--".concat(s),!0),Object(m.a)(t,"Button--fullWidth",c),t)),onClick:a,disabled:i,type:o},n)}_.defaultProps={variant:"primary"};n(24);function L(e){var t=e.onChange,n=e.onSubmit,a=e.message,s=e.disabled,i=e.replyTo,o=e.onReplyClear;return r.a.createElement("form",{onSubmit:function(e){return function(e,t){e.preventDefault(),t&&t()}(e,n)},className:"MessageBox"},i&&r.a.createElement("div",null,"Odpowiadasz na"," ",r.a.createElement("button",{type:"button",onClick:o},"(anuluj)"),r.a.createElement("div",{style:{background:"#fff",margin:"5px 0",padding:"5px"}},r.a.createElement(N,{message:i,showSubmessages:!1}))),r.a.createElement("textarea",{value:a,onChange:function(e){return function(e,t){t&&t(e.target.value)}(e,t)},className:"MessageBox__textarea",disabled:s}),r.a.createElement(_,{type:"submit",disabled:s},"Wy\u015blij"))}var D=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={channelName:"AppUnite: #obiady",currentUser:null,onlineUsers:[],onlineUsersLoading:!0,messages:[],messagesLoading:!0,currentMessage:"",replyTo:void 0},n._subscriptions=[],n.handleSendMessage=function(){var e,t=n.state.currentMessage;e={content:t},new Promise(function(t,n){setTimeout(function(){x(e),t()},500)}),n.setState({currentMessage:"",replyTo:void 0})},n.handleTextAreaOnChange=function(e){n.setState({currentMessage:e})},n.handleSignIn=function(){var e=prompt("Tw\xf3j nick: ","go\u015b\u0107123"),t=prompt("Kolor: ","red")||void 0;if(e)return A({name:e,color:t}).then(function(e){n.setState({currentUser:e})});alert("Podaj nick!")},n.handleSignOut=function(){P(),n.setState({currentUser:null})},n.handleReplyClick=function(e){n.setState({replyTo:e})},n.handleReplyClear=function(){n.setState({replyTo:void 0})},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._subscriptions.push(w.asObservable().subscribe(function(t){e.setState({onlineUsers:t,onlineUsersLoading:!1})})),this._subscriptions.push(S.asObservable().subscribe(function(t){e.setState({messages:t,messagesLoading:!1})}))}},{key:"componentWillUnmount",value:function(){this._subscriptions.forEach(function(e){return e.unsubscribe()}),this._subscriptions.length=0}},{key:"render",value:function(){var e=this.state,t=e.channelName,n=e.onlineUsers,a=e.onlineUsersLoading,s=e.messages,i=e.messagesLoading,o=e.currentMessage,c=e.currentUser,l=e.replyTo;return r.a.createElement("div",{className:"Chat"},r.a.createElement(M,null,r.a.createElement(f,{header:!0,widthPercentage:70},r.a.createElement("strong",null,t)),r.a.createElement(f,{header:!0,widthPercentage:30,textAlign:"center"},"Obecni: [",a?"...":n.length,"]")),r.a.createElement(M,null,r.a.createElement(f,{widthPercentage:70,scrollable:!0,height:300},i?r.a.createElement("div",null,"\u0141adowanie..."):r.a.createElement(R,{messages:s,onReplyClick:this.handleReplyClick})),r.a.createElement(f,{widthPercentage:30,scrollable:!0,height:300},r.a.createElement(T,{users:n}))),r.a.createElement(M,null,r.a.createElement(f,{header:!0,widthPercentage:70},r.a.createElement(L,{message:o,disabled:!c,replyTo:l,onReplyClear:this.handleReplyClear,onChange:this.handleTextAreaOnChange,onSubmit:this.handleSendMessage})),r.a.createElement(f,{widthPercentage:30},c?r.a.createElement(_,{onClick:this.handleSignOut,variant:"secondary",fullWidth:!0},"Wyloguj si\u0119"):r.a.createElement(_,{onClick:this.handleSignIn,variant:"secondary",fullWidth:!0},"Zaloguj si\u0119"))))}}]),t}(r.a.PureComponent);var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null))};i.a.render(r.a.createElement(W,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.59c6eb34.chunk.js.map